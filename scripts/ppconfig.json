{"name":"cfccfffacdbb","url":"https://tradingdao.vercel.app/","showName":"TradingDAO","appid":"com.pakeplus.app","icon":"","iconPath":"C:\\Users\\HUAWEI\\AppData\\Roaming\\com.pakeplus.pacbao\\sg98dvss89p.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.2","preview":"desktop","platform":["1-1","2-2"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\n\n// ========== 新增代码开始 ==========\n// 添加一个标志，记录页面是否已初始化\nlet isPageInitialized = false;\n\n// 页面加载完成后标记为已初始化\nwindow.addEventListener('load', () => {\n    setTimeout(() => {\n        isPageInitialized = true;\n        console.log('Page initialized, starting link interception');\n    }, 800); // 延迟800ms确保首页完全加载\n});\n// ========== 新增代码结束 ==========\n\nconst hookClick = (e) => {\n    // ========== 新增代码开始 ==========\n    // 如果页面未初始化，不拦截任何点击\n    if (!isPageInitialized) {\n        console.log('Page not initialized yet, skip interception');\n        return;\n    }\n    \n    // 检查是否是用户真实的点击，避免JavaScript自动触发的点击\n    if (!e.isTrusted) {\n        console.log('Not a user-triggered click, skip');\n        return;\n    }\n    // ========== 新增代码结束 ==========\n    \n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    \n    // ========== 新增代码开始 ==========\n    // 检查链接是否有效，避免拦截特殊链接\n    if (origin && origin.href) {\n        const href = origin.getAttribute('href');\n        // 跳过无效或特殊协议链接\n        if (!href || \n            href === '#' || \n            href.startsWith('javascript:') || \n            href.startsWith('mailto:') || \n            href.startsWith('tel:') ||\n            href.startsWith('blob:') ||\n            href.startsWith('data:')) {\n            console.log('Special link or anchor, skip');\n            return;\n        }\n        \n        // 如果是当前页面，不处理（避免首页重新加载）\n        if (origin.href === window.location.href || \n            href === '/' || \n            href === '/index.html' ||\n            href === window.location.pathname) {\n            console.log('Same page link, skip');\n            return;\n        }\n    }\n    // ========== 新增代码结束 ==========\n    \n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\n// ========== 新增代码开始 ==========\n// 保存原始的window.open函数\nconst originalWindowOpen = window.open;\n// ========== 新增代码结束 ==========\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    \n    // ========== 新增代码开始 ==========\n    // 如果是无效URL、首页、空白页或当前页面，使用原始方法\n    if (!url || \n        url === window.location.href || \n        url === '/' || \n        url.includes('about:blank') ||\n        url === 'undefined' ||\n        url === 'null') {\n        console.log('Home/blank page or same URL, use original open');\n        return originalWindowOpen.call(this, url, target, features);\n    }\n    \n    // 检查是否是特殊协议\n    if (url.startsWith('javascript:') || \n        url.startsWith('mailto:') || \n        url.startsWith('tel:') ||\n        url.startsWith('blob:') ||\n        url.startsWith('data:')) {\n        console.log('Special protocol, use original open');\n        return originalWindowOpen.call(this, url, target, features);\n    }\n    \n    // 只有在页面初始化后才拦截\n    if (isPageInitialized) {\n        location.href = url;\n        return null;\n    } else {\n        console.log('Page not initialized, use original open');\n        return originalWindowOpen.call(this, url, target, features);\n    }\n    // ========== 新增代码结束 ==========\n}\n\n// ========== 新增代码开始 ==========\n// 延迟绑定点击事件，避免首页加载时被拦截\nsetTimeout(() => {\n    document.addEventListener('click', hookClick, { capture: true });\n    console.log('Click event listener added');\n}, 1000); // 等待1秒后再绑定事件\n// ========== 新增代码结束 ==========","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.5","iosRepo":"PakePlus-iOS-v2.1.5","androidRepo":"PakePlus-Android-v2.1.5","more":{"windows":{"label":"","title":"TradingDAO","url":"https://tradingdao.vercel.app/","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"fullScreen":false,"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"cfccfffacdbb","showName":"TradingDAO","version":"0.0.2","webUrl":"https://tradingdao.vercel.app/","id":"com.pakeplus.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"cfccfffacdbb","showName":"TradingDAO","version":"0.0.2","webUrl":"https://tradingdao.vercel.app/","id":"com.pakeplus.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"cfccfffacdbb","showName":"TradingDAO","version":"0.0.2","id":"com.pakeplus.app.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"https://tradingdao.vercel.app/","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}